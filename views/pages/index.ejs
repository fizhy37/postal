<!DOCTYPE html>
<html>
<head>
  <% include ../partials/header.ejs %>
</head>
<body>
  <% include ../partials/nav.ejs %>
  <script> 
    function dothejax() {
      // alert('is this called?');
      //do an ajax
        $.get('/math_service', 
          {
            'number1': $('input[name=number1]').val(),
            'number2': $('input[name=number2]').val(),
            'operation': $('input[name=operation]:checked').val()
          },
          function callback(data, status) {
          //when the thing comes back, update the DOM. 
          if (status != 'success') {
            console.log(status);
          } else {
            // var result = data.result;
            var result = data.result;
            //update DOM.
            $('#result').html(result);
              
          }
        });
    }
    
    
  </script>
  <div class="container">
    <h1>This is a test</h1>
    <form action="/math" method="GET">
      <label for="number1">First Number</label>
      <input type="text" name="number1" value="1"><br/>
      <label for="number2">Second Number</label>
      <input type="text" name="number2" value="4"><br/>
      <label for="operation">Select Operation</label><br/>
      <input type="radio" name="operation" value="add" checked>
        <label for="operation">Add</label><br/>
      <input type="radio" name="operation" value="subtract">
        <label for="operation">Subtract</label><br/>
      <input type="radio" name="operation" value="multiply">
        <label for="operation">Multiply</label><br/>
      <input type="radio" name="operation" value="divide">
        <label for="operation">Divide</label><br/>
      <input type="submit" name="submit">
    </form>
    <button onclick="dothejax()">AJAX Version </button>
    <h2 id="result"></h2>
  </div>
</body>
</html>